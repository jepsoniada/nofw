import data from  "/shared/dictionaryStore.js"
import pickStore from "/shared/modulePickStore.js"
import { spaMessageListener } from "/shared/SPAManager.js"

export default class extends HTMLElement {
	constructor () {
		super()
		this.attachShadow({ mode: "open" })
		const headers = data.getHeaders()
		this.shadowRoot.innerHTML = `
			<div class="picker">
				<div id="list-of-picks">
					${Object.keys(headers).map(name => `
						<check-box-
							data-modules='${JSON.stringify(headers[name])}'
							data-metadata='${JSON.stringify([name, headers[name]])}'
							data-name='${name}'
						></check-box-> 
					`).join('')}
				</div>
				<button- id="start" name="start">
					<span slot="0">start</span>
				</button->
			</div>
			<style>
				.picker {
					display: flex;
					flex-direction: column;
					gap: 16px;
				}
				#start {
					margin: 0 0 0 auto
				}
				.picker {
					background: url(
data:image/svg+xml,%3Csvg%20width%3D%2292%22%20height%3D%2212%22%20viewBox%3D%220%200%2092%2012%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M3.39205%209.13636C2.84659%209.13636%202.36506%208.99858%201.94744%208.72301C1.52983%208.4446%201.20313%208.05256%200.96733%207.54688C0.731534%207.03835%200.613636%206.4375%200.613636%205.74432C0.613636%205.05682%200.731534%204.46023%200.96733%203.95455C1.20313%203.44886%201.53125%203.05824%201.9517%202.78267C2.37216%202.5071%202.85795%202.36932%203.40909%202.36932C3.83523%202.36932%204.17188%202.44034%204.41903%202.58239C4.66903%202.72159%204.85938%202.88068%204.99006%203.05966C5.12358%203.2358%205.22727%203.38068%205.30114%203.49432H5.38636V0.272727H6.39205V9H5.42045V7.99432H5.30114C5.22727%208.11364%205.12216%208.2642%204.9858%208.44602C4.84943%208.625%204.65483%208.78551%204.40199%208.92756C4.14915%209.06676%203.8125%209.13636%203.39205%209.13636ZM3.52841%208.23295C3.93182%208.23295%204.27273%208.12784%204.55114%207.91761C4.82955%207.70455%205.04119%207.41051%205.18608%207.03551C5.33097%206.65767%205.40341%206.22159%205.40341%205.72727C5.40341%205.23864%205.33239%204.81108%205.19034%204.4446C5.0483%204.07528%204.83807%203.78835%204.55966%203.58381C4.28125%203.37642%203.9375%203.27273%203.52841%203.27273C3.10227%203.27273%202.74716%203.3821%202.46307%203.60085C2.18182%203.81676%201.97017%204.1108%201.82812%204.48295C1.68892%204.85227%201.61932%205.26705%201.61932%205.72727C1.61932%206.19318%201.69034%206.61648%201.83239%206.99716C1.97727%207.375%202.19034%207.67614%202.47159%207.90057C2.75568%208.12216%203.10795%208.23295%203.52841%208.23295ZM8.37358%209V2.45455H9.37926V9H8.37358ZM8.88494%201.36364C8.68892%201.36364%208.51989%201.29688%208.37784%201.16335C8.23864%201.02983%208.16903%200.869318%208.16903%200.681818C8.16903%200.494318%208.23864%200.333807%208.37784%200.200284C8.51989%200.0667613%208.68892%200%208.88494%200C9.08097%200%209.24858%200.0667613%209.38778%200.200284C9.52983%200.333807%209.60085%200.494318%209.60085%200.681818C9.60085%200.869318%209.52983%201.02983%209.38778%201.16335C9.24858%201.29688%209.08097%201.36364%208.88494%201.36364ZM13.8803%209.13636C13.2667%209.13636%2012.7383%208.99148%2012.2951%208.7017C11.8519%208.41193%2011.511%208.01278%2011.2724%207.50426C11.0337%206.99574%2010.9144%206.41477%2010.9144%205.76136C10.9144%205.09659%2011.0366%204.50994%2011.2809%204.00142C11.5281%203.49006%2011.8718%203.09091%2012.3121%202.80398C12.7553%202.5142%2013.2724%202.36932%2013.8633%202.36932C14.3235%202.36932%2014.7383%202.45455%2015.1076%202.625C15.4769%202.79545%2015.7795%203.03409%2016.0153%203.34091C16.2511%203.64773%2016.3974%204.00568%2016.4542%204.41477H15.4485C15.3718%204.11648%2015.2013%203.85227%2014.9371%203.62216C14.6758%203.3892%2014.3235%203.27273%2013.8803%203.27273C13.4883%203.27273%2013.1445%203.375%2012.8491%203.57955C12.5565%203.78125%2012.3278%204.06676%2012.163%204.43608C12.0011%204.80256%2011.9201%205.23295%2011.9201%205.72727C11.9201%206.23295%2011.9996%206.6733%2012.1587%207.0483C12.3207%207.4233%2012.5479%207.71449%2012.8406%207.92188C13.136%208.12926%2013.4826%208.23295%2013.8803%208.23295C14.1417%208.23295%2014.3789%208.1875%2014.592%208.09659C14.805%208.00568%2014.9854%207.875%2015.1332%207.70455C15.2809%207.53409%2015.386%207.32955%2015.4485%207.09091H16.4542C16.3974%207.47727%2016.2567%207.82528%2016.0323%208.13494C15.8107%208.44176%2015.5167%208.68608%2015.1502%208.8679C14.7866%209.04688%2014.3633%209.13636%2013.8803%209.13636ZM20.771%202.45455V3.30682H17.3789V2.45455H20.771ZM18.3675%200.886364H19.3732V7.125C19.3732%207.40909%2019.4144%207.62216%2019.4968%207.7642C19.582%207.90341%2019.69%207.99716%2019.8207%208.04545C19.9542%208.09091%2020.0948%208.11364%2020.2425%208.11364C20.3533%208.11364%2020.4442%208.10795%2020.5153%208.09659C20.5863%208.08239%2020.6431%208.07102%2020.6857%208.0625L20.8903%208.96591C20.8221%208.99148%2020.7269%209.01705%2020.6048%209.04261C20.4826%209.07102%2020.3278%209.08523%2020.1403%209.08523C19.8562%209.08523%2019.5778%209.02415%2019.305%208.90199C19.0352%208.77983%2018.8107%208.59375%2018.6317%208.34375C18.4556%208.09375%2018.3675%207.77841%2018.3675%207.39773V0.886364ZM22.2837%209V2.45455H23.2894V9H22.2837ZM22.7951%201.36364C22.5991%201.36364%2022.43%201.29688%2022.288%201.16335C22.1488%201.02983%2022.0792%200.869318%2022.0792%200.681818C22.0792%200.494318%2022.1488%200.333807%2022.288%200.200284C22.43%200.0667613%2022.5991%200%2022.7951%200C22.9911%200%2023.1587%200.0667613%2023.2979%200.200284C23.44%200.333807%2023.511%200.494318%2023.511%200.681818C23.511%200.869318%2023.44%201.02983%2023.2979%201.16335C23.1587%201.29688%2022.9911%201.36364%2022.7951%201.36364ZM27.7905%209.13636C27.1996%209.13636%2026.6811%208.99574%2026.2351%208.71449C25.7919%208.43324%2025.4453%208.03977%2025.1953%207.53409C24.9482%207.02841%2024.8246%206.4375%2024.8246%205.76136C24.8246%205.07955%2024.9482%204.48437%2025.1953%203.97585C25.4453%203.46733%2025.7919%203.07244%2026.2351%202.79119C26.6811%202.50994%2027.1996%202.36932%2027.7905%202.36932C28.3814%202.36932%2028.8984%202.50994%2029.3416%202.79119C29.7876%203.07244%2030.1342%203.46733%2030.3814%203.97585C30.6314%204.48437%2030.7564%205.07955%2030.7564%205.76136C30.7564%206.4375%2030.6314%207.02841%2030.3814%207.53409C30.1342%208.03977%2029.7876%208.43324%2029.3416%208.71449C28.8984%208.99574%2028.3814%209.13636%2027.7905%209.13636ZM27.7905%208.23295C28.2393%208.23295%2028.6087%208.1179%2028.8984%207.88778C29.1882%207.65767%2029.4027%207.35511%2029.5419%206.98011C29.6811%206.60511%2029.7507%206.19886%2029.7507%205.76136C29.7507%205.32386%2029.6811%204.91619%2029.5419%204.53835C29.4027%204.16051%2029.1882%203.85511%2028.8984%203.62216C28.6087%203.3892%2028.2393%203.27273%2027.7905%203.27273C27.3416%203.27273%2026.9723%203.3892%2026.6825%203.62216C26.3928%203.85511%2026.1783%204.16051%2026.0391%204.53835C25.8999%204.91619%2025.8303%205.32386%2025.8303%205.76136C25.8303%206.19886%2025.8999%206.60511%2026.0391%206.98011C26.1783%207.35511%2026.3928%207.65767%2026.6825%207.88778C26.9723%208.1179%2027.3416%208.23295%2027.7905%208.23295ZM33.2972%205.0625V9H32.2915V2.45455H33.2631V3.47727H33.3484C33.5018%203.14489%2033.7347%202.87784%2034.0472%202.67614C34.3597%202.47159%2034.7631%202.36932%2035.2575%202.36932C35.7006%202.36932%2036.0884%202.46023%2036.4208%202.64205C36.7532%202.82102%2037.0117%203.09375%2037.1964%203.46023C37.381%203.82386%2037.4734%204.28409%2037.4734%204.84091V9H36.4677V4.90909C36.4677%204.39489%2036.3342%203.99432%2036.0671%203.70739C35.8001%203.41761%2035.4336%203.27273%2034.9677%203.27273C34.6467%203.27273%2034.3597%203.34233%2034.1069%203.48153C33.8569%203.62074%2033.6594%203.82386%2033.5146%204.09091C33.3697%204.35795%2033.2972%204.68182%2033.2972%205.0625ZM41.2372%209.15341C40.8224%209.15341%2040.446%209.07528%2040.108%208.91903C39.7699%208.75994%2039.5014%208.53125%2039.3026%208.23295C39.1037%207.93182%2039.0043%207.56818%2039.0043%207.14205C39.0043%206.76705%2039.0781%206.46307%2039.2259%206.23011C39.3736%205.99432%2039.571%205.80966%2039.8182%205.67614C40.0653%205.54261%2040.3381%205.44318%2040.6364%205.37784C40.9375%205.30966%2041.2401%205.25568%2041.544%205.21591C41.9418%205.16477%2042.2642%205.12642%2042.5114%205.10085C42.7614%205.07244%2042.9432%205.02557%2043.0568%204.96023C43.1733%204.89489%2043.2315%204.78125%2043.2315%204.61932V4.58523C43.2315%204.16477%2043.1165%203.83807%2042.8864%203.60511C42.6591%203.37216%2042.3139%203.25568%2041.8509%203.25568C41.3707%203.25568%2040.9943%203.3608%2040.7216%203.57102C40.4489%203.78125%2040.2571%204.00568%2040.1463%204.24432L39.1918%203.90341C39.3622%203.50568%2039.5895%203.19602%2039.8736%202.97443C40.1605%202.75%2040.473%202.59375%2040.8111%202.50568C41.152%202.41477%2041.4872%202.36932%2041.8168%202.36932C42.027%202.36932%2042.2685%202.39489%2042.5412%202.44602C42.8168%202.49432%2043.0824%202.59517%2043.3381%202.74858C43.5966%202.90199%2043.8111%203.13352%2043.9815%203.44318C44.152%203.75284%2044.2372%204.16761%2044.2372%204.6875V9H43.2315V8.11364H43.1804C43.1122%208.25568%2042.9986%208.40767%2042.8395%208.5696C42.6804%208.73153%2042.4688%208.86932%2042.2045%208.98295C41.9403%209.09659%2041.6179%209.15341%2041.2372%209.15341ZM41.3906%208.25C41.7884%208.25%2042.1236%208.17188%2042.3963%208.01562C42.6719%207.85938%2042.8793%207.65767%2043.0185%207.41051C43.1605%207.16335%2043.2315%206.90341%2043.2315%206.63068V5.71023C43.1889%205.76136%2043.0952%205.80824%2042.9503%205.85085C42.8082%205.89062%2042.6435%205.92614%2042.456%205.95739C42.2713%205.9858%2042.0909%206.01136%2041.9148%206.03409C41.7415%206.05398%2041.6009%206.07102%2041.4929%206.08523C41.2315%206.11932%2040.9872%206.17472%2040.7599%206.25142C40.5355%206.32528%2040.3537%206.4375%2040.2145%206.58807C40.0781%206.7358%2040.0099%206.9375%2040.0099%207.19318C40.0099%207.54261%2040.1392%207.80682%2040.3977%207.9858C40.6591%208.16193%2040.9901%208.25%2041.3906%208.25ZM46.0728%209V2.45455H47.0444V3.44318H47.1126C47.2319%203.11932%2047.4478%202.85653%2047.7603%202.65483C48.0728%202.45312%2048.4251%202.35227%2048.8171%202.35227C48.891%202.35227%2048.9833%202.35369%2049.0941%202.35653C49.2049%202.35937%2049.2887%202.36364%2049.3455%202.36932V3.39205C49.3114%203.38352%2049.2333%203.37074%2049.1112%203.35369C48.9918%203.33381%2048.8654%203.32386%2048.7319%203.32386C48.4137%203.32386%2048.1296%203.39062%2047.8796%203.52415C47.6325%203.65483%2047.4364%203.83665%2047.2915%204.0696C47.1495%204.29972%2047.0785%204.5625%2047.0785%204.85795V9H46.0728ZM51.3846%2011.4545C51.2141%2011.4545%2051.0621%2011.4403%2050.9286%2011.4119C50.7951%2011.3864%2050.7028%2011.3608%2050.6516%2011.3352L50.9073%2010.4489C51.1516%2010.5114%2051.3675%2010.5341%2051.555%2010.517C51.7425%2010.5%2051.9087%2010.4162%2052.0536%2010.2656C52.2013%2010.1179%2052.3363%209.87784%2052.4585%209.54545L52.646%209.03409L50.2255%202.45455H51.3164L53.1232%207.67045H53.1914L54.9982%202.45455H56.0891L53.3107%209.95455C53.1857%2010.2926%2053.0309%2010.5724%2052.8462%2010.794C52.6616%2011.0185%2052.4471%2011.1847%2052.2028%2011.2926C51.9613%2011.4006%2051.6886%2011.4545%2051.3846%2011.4545ZM57.5529%209V0.272727H60.5018C61.1864%200.272727%2061.7461%200.396307%2062.1808%200.643466C62.6183%200.887784%2062.9421%201.21875%2063.1523%201.63636C63.3626%202.05398%2063.4677%202.51989%2063.4677%203.03409C63.4677%203.5483%2063.3626%204.01562%2063.1523%204.43608C62.945%204.85653%2062.6239%205.19176%2062.1893%205.44176C61.7546%205.68892%2061.1978%205.8125%2060.5188%205.8125H58.4052V4.875H60.4847C60.9535%204.875%2061.3299%204.79403%2061.614%204.6321C61.8981%204.47017%2062.104%204.25142%2062.2319%203.97585C62.3626%203.69744%2062.4279%203.38352%2062.4279%203.03409C62.4279%202.68466%2062.3626%202.37216%2062.2319%202.09659C62.104%201.82102%2061.8967%201.60511%2061.6097%201.44886C61.3228%201.28977%2060.9421%201.21023%2060.4677%201.21023H58.6097V9H57.5529ZM65.0337%209V2.45455H66.0394V9H65.0337ZM65.5451%201.36364C65.3491%201.36364%2065.18%201.29688%2065.038%201.16335C64.8988%201.02983%2064.8292%200.869318%2064.8292%200.681818C64.8292%200.494318%2064.8988%200.333807%2065.038%200.200284C65.18%200.0667613%2065.3491%200%2065.5451%200C65.7411%200%2065.9087%200.0667613%2066.0479%200.200284C66.19%200.333807%2066.261%200.494318%2066.261%200.681818C66.261%200.869318%2066.19%201.02983%2066.0479%201.16335C65.9087%201.29688%2065.7411%201.36364%2065.5451%201.36364ZM70.5405%209.13636C69.9268%209.13636%2069.3984%208.99148%2068.9553%208.7017C68.5121%208.41193%2068.1712%208.01278%2067.9325%207.50426C67.6939%206.99574%2067.5746%206.41477%2067.5746%205.76136C67.5746%205.09659%2067.6967%204.50994%2067.9411%204.00142C68.1882%203.49006%2068.532%203.09091%2068.9723%202.80398C69.4155%202.5142%2069.9325%202.36932%2070.5234%202.36932C70.9837%202.36932%2071.3984%202.45455%2071.7678%202.625C72.1371%202.79545%2072.4396%203.03409%2072.6754%203.34091C72.9112%203.64773%2073.0575%204.00568%2073.1143%204.41477H72.1087C72.032%204.11648%2071.8615%203.85227%2071.5973%203.62216C71.3359%203.3892%2070.9837%203.27273%2070.5405%203.27273C70.1484%203.27273%2069.8047%203.375%2069.5092%203.57955C69.2166%203.78125%2068.9879%204.06676%2068.8232%204.43608C68.6612%204.80256%2068.5803%205.23295%2068.5803%205.72727C68.5803%206.23295%2068.6598%206.6733%2068.8189%207.0483C68.9808%207.4233%2069.2081%207.71449%2069.5007%207.92188C69.7962%208.12926%2070.1428%208.23295%2070.5405%208.23295C70.8018%208.23295%2071.0391%208.1875%2071.2521%208.09659C71.4652%208.00568%2071.6456%207.875%2071.7933%207.70455C71.9411%207.53409%2072.0462%207.32955%2072.1087%207.09091H73.1143C73.0575%207.47727%2072.9169%207.82528%2072.6925%208.13494C72.4709%208.44176%2072.1768%208.68608%2071.8104%208.8679C71.4467%209.04688%2071.0234%209.13636%2070.5405%209.13636ZM75.522%206.61364L75.505%205.36932H75.7095L78.5732%202.45455H79.8175L76.7663%205.53977H76.6811L75.522%206.61364ZM74.5845%209V0.272727H75.5902V9H74.5845ZM78.7436%209L76.1868%205.76136L76.9027%205.0625L80.022%209H78.7436ZM83.5866%209.13636C82.956%209.13636%2082.4119%208.99716%2081.9545%208.71875C81.5%208.4375%2081.1491%208.04545%2080.902%207.54261C80.6577%207.03693%2080.5355%206.44886%2080.5355%205.77841C80.5355%205.10795%2080.6577%204.51705%2080.902%204.00568C81.1491%203.49148%2081.4929%203.09091%2081.9332%202.80398C82.3764%202.5142%2082.8935%202.36932%2083.4844%202.36932C83.8253%202.36932%2084.1619%202.42614%2084.4943%202.53977C84.8267%202.65341%2085.1293%202.83807%2085.402%203.09375C85.6747%203.34659%2085.892%203.68182%2086.054%204.09943C86.2159%204.51705%2086.2969%205.03125%2086.2969%205.64205V6.06818H81.2514V5.19886H85.2741C85.2741%204.82955%2085.2003%204.5%2085.0526%204.21023C84.9077%203.92045%2084.7003%203.69176%2084.4304%203.52415C84.1634%203.35653%2083.848%203.27273%2083.4844%203.27273C83.0838%203.27273%2082.7372%203.37216%2082.4446%203.57102C82.1548%203.76705%2081.9318%204.02273%2081.7756%204.33807C81.6193%204.65341%2081.5412%204.99148%2081.5412%205.35227V5.93182C81.5412%206.42614%2081.6264%206.84517%2081.7969%207.18892C81.9702%207.52983%2082.2102%207.78977%2082.517%207.96875C82.8239%208.14489%2083.1804%208.23295%2083.5866%208.23295C83.8509%208.23295%2084.0895%208.19602%2084.3026%208.12216C84.5185%208.04545%2084.7045%207.93182%2084.8608%207.78125C85.017%207.62784%2085.1378%207.4375%2085.223%207.21023L86.1946%207.48295C86.0923%207.8125%2085.9205%208.10227%2085.679%208.35227C85.4375%208.59943%2085.1392%208.79261%2084.7841%208.93182C84.429%209.06818%2084.0298%209.13636%2083.5866%209.13636ZM87.8267%209V2.45455H88.7983V3.44318H88.8665C88.9858%203.11932%2089.2017%202.85653%2089.5142%202.65483C89.8267%202.45312%2090.179%202.35227%2090.571%202.35227C90.6449%202.35227%2090.7372%202.35369%2090.848%202.35653C90.9588%202.35937%2091.0426%202.36364%2091.0994%202.36932V3.39205C91.0653%203.38352%2090.9872%203.37074%2090.8651%203.35369C90.7457%203.33381%2090.6193%203.32386%2090.4858%203.32386C90.1676%203.32386%2089.8835%203.39062%2089.6335%203.52415C89.3864%203.65483%2089.1903%203.83665%2089.0455%204.0696C88.9034%204.29972%2088.8324%204.5625%2088.8324%204.85795V9H87.8267Z%22%20fill%3D%22%23ddd%22%2F%3E%0A%3C%2Fsvg%3E%0A
					);
				}
			</style>
		`
		this.shadowRoot.querySelector("#start").addEventListener("click", _ => {
			spaMessageListener.changeView("/guess")
		})
	}
}
